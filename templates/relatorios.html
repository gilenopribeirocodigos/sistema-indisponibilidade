<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Relat√≥rios - Sistema de Indisponibilidade</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="stylesheet" href="/static/css/relatorios.css">
</head>
<body>
    <div class="relatorio-container">

        <div class="relatorio-header">
            <a href="/home" class="btn-voltar">‚Üê Voltar</a>
            <h1>üìä Relat√≥rios de Disponibilidade</h1>
            <div class="user-info-mini">
                <span>{{ usuario.nome }}</span>
                <span class="badge badge-{{ usuario.perfil.lower().replace('_', '-') }}">{{ usuario.perfil }}</span>
            </div>
        </div>

        <div class="tabs-container">
            <button class="tab-btn active" data-tab="geral">üìã Relat√≥rio Geral</button>
            <button class="tab-btn" data-tab="supervisor">üë• Por Supervisor</button>
        </div>

        <div class="filtros-section">
            <div class="filtro-grupo">
                <label for="tipo-periodo">üìÖ Tipo de Per√≠odo:</label>
                <select id="tipo-periodo">
                    <option value="dia">Dia Espec√≠fico</option>
                    <option value="periodo" selected>Per√≠odo</option>
                </select>
            </div>

            <div class="filtro-grupo" id="filtro-dia" style="display: none;">
                <label for="data-dia">Data:</label>
                <input type="date" id="data-dia" value="{{ hoje_iso }}">
            </div>

            <div class="filtro-grupo" id="filtro-periodo">
                <label for="data-inicio">De:</label>
                <input type="date" id="data-inicio" value="{{ inicio_mes }}">
                <label for="data-fim">At√©:</label>
                <input type="date" id="data-fim" value="{{ hoje_iso }}">
            </div>

            <button id="btn-gerar-relatorio" class="btn btn-primary">üìä Gerar Relat√≥rio</button>
        </div>

        <!-- TAB SUPERVISOR -->
        <div id="tab-supervisor" class="tab-content active">

            <div id="relatorio-sup-info" class="relatorio-info" style="display: none;">
                <h2>RELAT√ìRIO DE DISPONIBILIDADE - POR SUPERVISOR</h2>
                <div class="info-grid">
                    <div class="info-item">
                        <strong>Per√≠odo:</strong> <span id="sup-periodo">-</span>
                    </div>
                    <div class="info-item">
                        <strong>Total Registros:</strong> <span id="sup-total-registros">-</span>
                    </div>
                </div>
            </div>

            <div class="relatorio-tabela-container" id="container-tabela-sup" style="display: none;">
                <div style="overflow-x: auto;">
                    <table class="relatorio-tabela tabela-wide" id="tabela-supervisor">
                        <thead>
                            <tr id="cabecalho-supervisor">
                                <th>Supervisor</th>
                                <th>PRESENTE</th>
                                <th>TOTAL</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td colspan="3" class="loading">Gere um relat√≥rio para visualizar os dados</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

        </div>

        <div class="footer-relatorio">
            <p>Sistema de Indisponibilidade - DPL Constru√ß√µes | Equatorial Energia</p>
            <p>Gerado em: <span id="data-geracao">-</span></p>
        </div>

    </div>

    <script src="/static/js/relatorios.js"></script>
</body>
</html>
